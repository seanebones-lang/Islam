<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Board - Islamic Learning Companion</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        .community-board {
            min-height: 100vh;
            background: linear-gradient(135deg, var(--dark-green), var(--darker-green));
        }
        
        .board-header {
            background: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 0;
            margin-bottom: 1rem;
        }
        
        .board-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .board-title {
            color: var(--gold);
            font-size: 2rem;
            font-weight: 700;
            margin: 0;
        }
        
        .board-stats {
            display: flex;
            gap: 2rem;
            color: var(--text-secondary);
            justify-content: center;
            margin-top: 1rem;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            color: var(--gold);
            font-size: 1.5rem;
            font-weight: 600;
            display: block;
        }
        
        .board-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 2rem;
        }
        
        .main-content {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .sidebar-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .sidebar-card h3 {
            color: var(--gold);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        
        .forum-categories {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .category-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .category-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }
        
        .category-icon {
            font-size: 1.5rem;
            color: var(--light-green);
            min-width: 30px;
        }
        
        .category-info {
            flex: 1;
        }
        
        .category-name {
            color: var(--white);
            font-weight: 600;
            margin-bottom: 0.3rem;
        }
        
        .category-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .category-stats {
            text-align: right;
            color: var(--text-secondary);
            font-size: 0.8rem;
        }
        
        .topics-list {
            margin-top: 2rem;
        }
        
        .topic-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .topic-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-2px);
        }
        
        .topic-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--gold), var(--gold-light));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--dark-green);
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .topic-content {
            flex: 1;
        }
        
        .topic-title {
            color: var(--white);
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }
        
        .topic-meta {
            display: flex;
            gap: 1rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .topic-stats {
            text-align: right;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .topic-replies {
            background: rgba(212, 175, 55, 0.2);
            color: var(--gold);
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        .create-topic-btn {
            background: var(--gold);
            color: var(--dark-green);
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .create-topic-btn:hover {
            background: var(--gold-light);
            transform: translateY(-2px);
        }
        
        .guidelines-btn {
            background: transparent;
            color: var(--gold);
            border: 2px solid var(--gold);
            padding: 1rem 2rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .guidelines-btn:hover {
            background: var(--gold);
            color: var(--dark-green);
        }
        
        .online-users {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }
        
        .user-item {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .user-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--light-green), var(--gold));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--dark-green);
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .user-info {
            flex: 1;
        }
        
        .user-name {
            color: var(--white);
            font-weight: 500;
            font-size: 0.9rem;
        }
        
        .user-status {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }
        
        .online-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--light-green);
        }
        
        .recent-activity {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }
        
        .activity-item {
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .activity-text {
            color: var(--white);
            font-size: 0.9rem;
            margin-bottom: 0.3rem;
        }
        
        .activity-time {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }
        
        .search-box {
            display: flex;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            overflow: hidden;
            margin-bottom: 1rem;
        }
        
        .search-box input {
            flex: 1;
            background: transparent;
            border: none;
            padding: 1rem 1.5rem;
            color: var(--white);
            font-size: 1rem;
            outline: none;
        }
        
        .search-box input::placeholder {
            color: var(--text-secondary);
        }
        
        .search-box button {
            background: var(--gold);
            color: var(--dark-green);
            border: none;
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .search-box button:hover {
            background: var(--gold-light);
        }
        
        @media (max-width: 768px) {
            .board-content {
                grid-template-columns: 1fr;
                padding: 0 1rem;
            }
            
            .board-nav {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .board-stats {
                justify-content: center;
            }
            
            .topic-item {
                flex-direction: column;
                text-align: center;
            }
            
            .topic-stats {
                text-align: center;
            }
        }

        /* Call to Action Styles */
        .cta-section {
            margin: 2rem 0;
            padding: 0 2rem;
        }

        .cta-card {
            background: linear-gradient(135deg, var(--gold), var(--gold-light));
            border-radius: 20px;
            padding: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .cta-content h3 {
            color: var(--dark-green);
            font-size: 1.5rem;
            margin: 0 0 0.5rem 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .cta-content p {
            color: var(--dark-green);
            margin: 0 0 1.5rem 0;
            opacity: 0.8;
        }

        .cta-btn {
            background: var(--dark-green);
            color: var(--white);
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.1rem;
        }

        .cta-btn:hover {
            background: var(--darker-green);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .cta-stats {
            display: flex;
            gap: 2rem;
        }

        .cta-stats .stat {
            text-align: center;
            color: var(--dark-green);
        }

        .cta-stats .stat-number {
            display: block;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .cta-stats .stat span:last-child {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .help-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--white);
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
        }

        .help-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: var(--gold);
            transform: translateY(-2px);
        }

        /* Responsive CTA */
        @media (max-width: 768px) {
            .cta-card {
                flex-direction: column;
                text-align: center;
                gap: 1.5rem;
            }
            
            .cta-stats {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-mosque"></i>
                <span>Islamic Learning Companion</span>
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="learn.html" class="nav-link">Learn</a>
                <a href="practice.html" class="nav-link">Practice</a>
                <a href="community.html" class="nav-link">Community</a>
                <a href="community-board.html" class="nav-link active">Board</a>
                <button class="nav-btn" onclick="window.location.href='learn.html'">Get Started</button>
            </div>
        </div>
    </nav>

    <!-- Community Board -->
    <div class="community-board">
        <!-- Board Header -->
        <div class="board-header">
            <div class="board-nav">
                <h1 class="board-title">
                    <i class="fas fa-comments"></i> Community Board
                </h1>
                
                <!-- User Authentication - Made More Prominent -->
                <div class="auth-section" id="auth-section">
                    <div class="user-info" id="user-info" style="display: none;">
                        <div class="user-avatar">
                            <i class="fas fa-user-circle"></i>
                        </div>
                        <div class="user-details">
                            <span class="user-name" id="user-name">Username</span>
                            <span class="user-role" id="user-role">Member</span>
                        </div>
                        <button class="logout-btn" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </div>
                    
                    <div class="auth-buttons" id="auth-buttons">
                        <button class="auth-btn login-btn" onclick="showLoginModal()">
                            <i class="fas fa-sign-in-alt"></i> Sign In
                        </button>
                        <button class="auth-btn signup-btn" onclick="showSignupModal()">
                            <i class="fas fa-user-plus"></i> Sign Up
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Board Stats - Moved Below Title -->
            <div class="board-stats">
                <div class="stat-item">
                    <span class="stat-number" id="total-topics">1,247</span>
                    <span>Topics</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="total-replies">8,934</span>
                    <span>Replies</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="online-users-count">156</span>
                    <span>Online</span>
                </div>
            </div>
        </div>

        <!-- Board Content -->
        <div class="board-content">
            <!-- Main Content -->
            <div class="main-content">
                <!-- Search and Create -->
                <div class="search-box">
                    <input type="text" placeholder="Search discussions, topics, or users..." id="board-search">
                    <button onclick="searchBoard()">
                        <i class="fas fa-search"></i>
                    </button>
                </div>

                <!-- Prominent Call to Action -->
                <div class="cta-section">
                    <div class="cta-card">
                        <div class="cta-content">
                            <h3><i class="fas fa-star"></i> Ready to Start a Discussion?</h3>
                            <p>Join the conversation and share your thoughts with the community</p>
                            <button class="cta-btn" onclick="createNewTopic()">
                                <i class="fas fa-plus"></i> Start New Discussion
                            </button>
                        </div>
                        <div class="cta-stats">
                            <div class="stat">
                                <span class="stat-number">1,247</span>
                                <span>Active Topics</span>
                            </div>
                            <div class="stat">
                                <span class="stat-number">156</span>
                                <span>Online Now</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="guidelines-btn" onclick="window.location.href='moderation-guidelines.html'">
                        <i class="fas fa-shield-alt"></i> Community Guidelines
                    </button>
                    <button class="help-btn" onclick="alert('Community Guidelines: Be respectful, stay on topic, and follow Islamic principles in all discussions.')">
                        <i class="fas fa-question-circle"></i> How to Participate
                    </button>
                </div>

                <!-- Forum Categories -->
                <div class="forum-categories">
                    <div class="category-item" onclick="showCategory('quran')">
                        <div class="category-icon">
                            <i class="fas fa-book-quran"></i>
                        </div>
                        <div class="category-info">
                            <div class="category-name">Quran & Tafseer</div>
                            <div class="category-description">Discussion about Quranic verses, interpretations, and meanings</div>
                        </div>
                        <div class="category-stats">
                            <div>342 topics</div>
                            <div>2,156 replies</div>
                        </div>
                    </div>

                    <div class="category-item" onclick="showCategory('hadith')">
                        <div class="category-icon">
                            <i class="fas fa-quote-left"></i>
                        </div>
                        <div class="category-info">
                            <div class="category-name">Hadith & Sunnah</div>
                            <div class="category-description">Authentic hadiths and Prophet's teachings</div>
                        </div>
                        <div class="category-stats">
                            <div>298 topics</div>
                            <div>1,847 replies</div>
                        </div>
                    </div>

                    <div class="category-item" onclick="showCategory('prayer')">
                        <div class="category-icon">
                            <i class="fas fa-hands-praying"></i>
                        </div>
                        <div class="category-info">
                            <div class="category-name">Prayer & Worship</div>
                            <div class="category-description">Salah, dua, and other forms of worship</div>
                        </div>
                        <div class="category-stats">
                            <div>189 topics</div>
                            <div>1,234 replies</div>
                        </div>
                    </div>

                    <div class="category-item" onclick="showCategory('new-muslims')">
                        <div class="category-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="category-info">
                            <div class="category-name">New Muslims</div>
                            <div class="category-description">Support and guidance for new converts</div>
                        </div>
                        <div class="category-stats">
                            <div>156 topics</div>
                            <div>892 replies</div>
                        </div>
                    </div>

                    <div class="category-item" onclick="showCategory('general')">
                        <div class="category-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="category-info">
                            <div class="category-name">General Discussion</div>
                            <div class="category-description">General Islamic topics and community chat</div>
                        </div>
                        <div class="category-stats">
                            <div>262 topics</div>
                            <div>2,805 replies</div>
                        </div>
                    </div>
                </div>

                <!-- Recent Topics -->
                <div class="topics-list">
                    <h3 style="color: var(--gold); margin-bottom: 1rem;">
                        <i class="fas fa-fire"></i> Recent Discussions
                    </h3>
                    
                    <div class="topic-item" onclick="openTopic('topic-1')">
                        <div class="topic-avatar">AM</div>
                        <div class="topic-content">
                            <div class="topic-title">Understanding Surah Al-Fatiha in Depth</div>
                            <div class="topic-meta">
                                <span><i class="fas fa-user"></i> Ahmad Muhammad</span>
                                <span><i class="fas fa-clock"></i> 2 hours ago</span>
                                <span><i class="fas fa-tag"></i> Quran & Tafseer</span>
                            </div>
                        </div>
                        <div class="topic-stats">
                            <div class="topic-replies">24 replies</div>
                            <div>45 views</div>
                        </div>
                    </div>

                    <div class="topic-item" onclick="openTopic('topic-2')">
                        <div class="topic-avatar">FS</div>
                        <div class="topic-content">
                            <div class="topic-title">Best Practices for Memorizing Quran</div>
                            <div class="topic-meta">
                                <span><i class="fas fa-user"></i> Fatima Saleem</span>
                                <span><i class="fas fa-clock"></i> 4 hours ago</span>
                                <span><i class="fas fa-tag"></i> Quran & Tafseer</span>
                            </div>
                        </div>
                        <div class="topic-stats">
                            <div class="topic-replies">18 replies</div>
                            <div>67 views</div>
                        </div>
                    </div>

                    <div class="topic-item" onclick="openTopic('topic-3')">
                        <div class="topic-avatar">MH</div>
                        <div class="topic-content">
                            <div class="topic-title">My Journey to Islam - Sharing My Story</div>
                            <div class="topic-meta">
                                <span><i class="fas fa-user"></i> Michael Hassan</span>
                                <span><i class="fas fa-clock"></i> 6 hours ago</span>
                                <span><i class="fas fa-tag"></i> New Muslims</span>
                            </div>
                        </div>
                        <div class="topic-stats">
                            <div class="topic-replies">31 replies</div>
                            <div>89 views</div>
                        </div>
                    </div>

                    <div class="topic-item" onclick="openTopic('topic-4')">
                        <div class="topic-avatar">AY</div>
                        <div class="topic-content">
                            <div class="topic-title">Perfecting Your Salah - Step by Step Guide</div>
                            <div class="topic-meta">
                                <span><i class="fas fa-user"></i> Aisha Yusuf</span>
                                <span><i class="fas fa-clock"></i> 8 hours ago</span>
                                <span><i class="fas fa-tag"></i> Prayer & Worship</span>
                            </div>
                        </div>
                        <div class="topic-stats">
                            <div class="topic-replies">15 replies</div>
                            <div>34 views</div>
                        </div>
                    </div>

                    <div class="topic-item" onclick="openTopic('topic-5')">
                        <div class="topic-avatar">IK</div>
                        <div class="topic-content">
                            <div class="topic-title">Authentic Hadith Collection - Daily Reading</div>
                            <div class="topic-meta">
                                <span><i class="fas fa-user"></i> Ibrahim Khalil</span>
                                <span><i class="fas fa-clock"></i> 1 day ago</span>
                                <span><i class="fas fa-tag"></i> Hadith & Sunnah</span>
                            </div>
                        </div>
                        <div class="topic-stats">
                            <div class="topic-replies">22 replies</div>
                            <div>78 views</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Online Users -->
                <div class="sidebar-card">
                    <h3><i class="fas fa-circle" style="color: var(--light-green);"></i> Online Now</h3>
                    <div class="online-users" id="online-users">
                        <div class="user-item">
                            <div class="user-avatar">AM</div>
                            <div class="user-info">
                                <div class="user-name">Ahmad Muhammad</div>
                                <div class="user-status">Reading Quran</div>
                            </div>
                            <div class="online-indicator"></div>
                        </div>
                        <div class="user-item">
                            <div class="user-avatar">FS</div>
                            <div class="user-info">
                                <div class="user-name">Fatima Saleem</div>
                                <div class="user-status">In Discussion</div>
                            </div>
                            <div class="online-indicator"></div>
                        </div>
                        <div class="user-item">
                            <div class="user-avatar">MH</div>
                            <div class="user-info">
                                <div class="user-name">Michael Hassan</div>
                                <div class="user-status">Learning Arabic</div>
                            </div>
                            <div class="online-indicator"></div>
                        </div>
                        <div class="user-item">
                            <div class="user-avatar">AY</div>
                            <div class="user-info">
                                <div class="user-name">Aisha Yusuf</div>
                                <div class="user-status">Praying</div>
                            </div>
                            <div class="online-indicator"></div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="sidebar-card">
                    <h3><i class="fas fa-history"></i> Recent Activity</h3>
                    <div class="recent-activity">
                        <div class="activity-item">
                            <div class="activity-text">Ahmad posted in "Understanding Surah Al-Fatiha"</div>
                            <div class="activity-time">2 hours ago</div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-text">Fatima replied to "Best Practices for Memorizing Quran"</div>
                            <div class="activity-time">4 hours ago</div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-text">Michael shared his conversion story</div>
                            <div class="activity-time">6 hours ago</div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-text">Aisha created "Perfecting Your Salah" topic</div>
                            <div class="activity-time">8 hours ago</div>
                        </div>
                    </div>
                </div>

                <!-- Community Guidelines -->
                <div class="sidebar-card">
                    <h3><i class="fas fa-shield-alt"></i> Community Guidelines</h3>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6;">
                        <p>• Be respectful and kind to all members</p>
                        <p>• Stay on topic and contribute meaningfully</p>
                        <p>• Use authentic Islamic sources</p>
                        <p>• Help new Muslims with patience</p>
                        <p>• Report inappropriate content</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/language-config.js"></script>
    <script src="js/translation-manager.js"></script>
    <script src="js/auto-moderation.js"></script>
    <script>
        // Community Board Functionality
        let currentCategory = 'all';
        let currentUser = null;

        // Initialize community board
        document.addEventListener('DOMContentLoaded', function() {
            loadUserProfile();
            updateOnlineUsers();
            loadRecentTopics();
        });

        // Load user profile
        function loadUserProfile() {
            // In a real app, this would load from localStorage or API
            currentUser = {
                name: 'Guest User',
                avatar: 'GU',
                isLoggedIn: false
            };
        }

        // Show category topics
        function showCategory(category) {
            currentCategory = category;
            
            // Update active category
            document.querySelectorAll('.category-item').forEach(item => {
                item.style.background = 'rgba(255, 255, 255, 0.05)';
            });
            event.currentTarget.style.background = 'rgba(212, 175, 55, 0.2)';
            
            // Load topics for category
            loadCategoryTopics(category);
        }

        // Load topics for specific category
        function loadCategoryTopics(category) {
            const topicsContainer = document.querySelector('.topics-list');
            
            // Simulate loading topics
            const topics = getTopicsForCategory(category);
            
            topicsContainer.innerHTML = `
                <h3 style="color: var(--gold); margin-bottom: 1rem;">
                    <i class="fas fa-fire"></i> ${getCategoryName(category)} Discussions
                </h3>
                ${topics.map(topic => `
                    <div class="topic-item" onclick="openTopic('${topic.id}')">
                        <div class="topic-avatar">${topic.avatar}</div>
                        <div class="topic-content">
                            <div class="topic-title">${topic.title}</div>
                            <div class="topic-meta">
                                <span><i class="fas fa-user"></i> ${topic.author}</span>
                                <span><i class="fas fa-clock"></i> ${topic.time}</span>
                                <span><i class="fas fa-tag"></i> ${topic.category}</span>
                            </div>
                        </div>
                        <div class="topic-stats">
                            <div class="topic-replies">${topic.replies} replies</div>
                            <div>${topic.views} views</div>
                        </div>
                    </div>
                `).join('')}
            `;
        }

        // Get topics for category
        function getTopicsForCategory(category) {
            const allTopics = {
                'quran': [
                    {
                        id: 'q1',
                        title: 'Understanding Surah Al-Fatiha in Depth',
                        author: 'Ahmad Muhammad',
                        time: '2 hours ago',
                        category: 'Quran & Tafseer',
                        replies: 24,
                        views: 45,
                        avatar: 'AM'
                    },
                    {
                        id: 'q2',
                        title: 'Best Practices for Memorizing Quran',
                        author: 'Fatima Saleem',
                        time: '4 hours ago',
                        category: 'Quran & Tafseer',
                        replies: 18,
                        views: 67,
                        avatar: 'FS'
                    }
                ],
                'hadith': [
                    {
                        id: 'h1',
                        title: 'Authentic Hadith Collection - Daily Reading',
                        author: 'Ibrahim Khalil',
                        time: '1 day ago',
                        category: 'Hadith & Sunnah',
                        replies: 22,
                        views: 78,
                        avatar: 'IK'
                    }
                ],
                'prayer': [
                    {
                        id: 'p1',
                        title: 'Perfecting Your Salah - Step by Step Guide',
                        author: 'Aisha Yusuf',
                        time: '8 hours ago',
                        category: 'Prayer & Worship',
                        replies: 15,
                        views: 34,
                        avatar: 'AY'
                    }
                ],
                'new-muslims': [
                    {
                        id: 'n1',
                        title: 'My Journey to Islam - Sharing My Story',
                        author: 'Michael Hassan',
                        time: '6 hours ago',
                        category: 'New Muslims',
                        replies: 31,
                        views: 89,
                        avatar: 'MH'
                    }
                ],
                'general': [
                    {
                        id: 'g1',
                        title: 'Ramadan Preparation Tips',
                        author: 'Sarah Ahmed',
                        time: '3 days ago',
                        category: 'General Discussion',
                        replies: 42,
                        views: 156,
                        avatar: 'SA'
                    }
                ]
            };
            
            return allTopics[category] || [];
        }

        // Get category name
        function getCategoryName(category) {
            const names = {
                'quran': 'Quran & Tafseer',
                'hadith': 'Hadith & Sunnah',
                'prayer': 'Prayer & Worship',
                'new-muslims': 'New Muslims',
                'general': 'General Discussion'
            };
            return names[category] || 'All Discussions';
        }

        // Open topic
        function openTopic(topicId) {
            // In a real app, this would navigate to the topic page
            window.location.href = `topic.html?id=${topicId}`;
        }

        // Create new topic
        function createNewTopic() {
            if (!currentUser) {
                showNotification('Please sign in to create a new topic.', 'warning');
                showLoginModal();
                return;
            }
            
            // Create a simple topic creation modal
            const modal = document.createElement('div');
            modal.className = 'auth-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h2><i class="fas fa-plus"></i> Create New Topic</h2>
                        <button class="close-btn" onclick="this.closest('.auth-modal').remove()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="topicForm" onsubmit="handleTopicCreation(event)">
                            <div class="form-group">
                                <label for="topicTitle">Topic Title</label>
                                <input type="text" id="topicTitle" required placeholder="Enter your topic title">
                            </div>
                            <div class="form-group">
                                <label for="topicCategory">Category</label>
                                <select id="topicCategory" required>
                                    <option value="">Select a category</option>
                                    <option value="quran">Quran & Tafseer</option>
                                    <option value="hadith">Hadith & Sunnah</option>
                                    <option value="prayer">Prayer & Worship</option>
                                    <option value="new-muslims">New Muslims</option>
                                    <option value="general">General Discussion</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="topicContent">Topic Content</label>
                                <textarea id="topicContent" required placeholder="Write your discussion topic here..." rows="5"></textarea>
                            </div>
                            <button type="submit" class="submit-btn">
                                <i class="fas fa-plus"></i> Create Topic
                            </button>
                        </form>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Add modal styles
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
            `;
            
            modal.querySelector('.modal-content').style.cssText = `
                background: linear-gradient(135deg, var(--dark-green), var(--medium-green));
                border-radius: 15px;
                padding: 2rem;
                max-width: 600px;
                width: 90%;
                border: 2px solid var(--gold);
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                max-height: 80vh;
                overflow-y: auto;
            `;
        }

        // Handle topic creation
        function handleTopicCreation(event) {
            event.preventDefault();
            
            const title = document.getElementById('topicTitle').value;
            const category = document.getElementById('topicCategory').value;
            const content = document.getElementById('topicContent').value;
            
            if (!title || !category || !content) {
                showNotification('Please fill in all fields.', 'error');
                return;
            }
            
            // Simulate topic creation
            const newTopic = {
                id: Date.now(),
                title: title,
                category: category,
                content: content,
                author: currentUser.username,
                createdAt: new Date().toISOString(),
                replies: 0,
                views: 0
            };
            
            // In a real app, this would save to a database
            console.log('New topic created:', newTopic);
            
            document.querySelector('.auth-modal').remove();
            showNotification('Topic created successfully! It will appear in the forum shortly.', 'success');
            
            // Reset form
            document.getElementById('topicForm').reset();
        }

        // Search board
        function searchBoard() {
            const searchTerm = document.getElementById('board-search').value;
            if (!searchTerm.trim()) {
                showNotification('Please enter a search term.', 'warning');
                return;
            }
            
            // Simulate search functionality
            console.log('Searching for:', searchTerm);
            
            // Create search results modal
            const modal = document.createElement('div');
            modal.className = 'auth-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h2><i class="fas fa-search"></i> Search Results</h2>
                        <button class="close-btn" onclick="this.closest('.auth-modal').remove()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="search-results">
                            <p>Search results for: <strong>"${searchTerm}"</strong></p>
                            <div class="result-item">
                                <h4>Sample Topic: Understanding Quranic Verses</h4>
                                <p>This is a sample search result that would contain relevant content...</p>
                                <div class="result-meta">
                                    <span>Category: Quran & Tafseer</span>
                                    <span>Replies: 15</span>
                                    <span>Views: 234</span>
                                </div>
                            </div>
                            <div class="result-item">
                                <h4>Sample Topic: Prayer Times Discussion</h4>
                                <p>Another sample search result with relevant content...</p>
                                <div class="result-meta">
                                    <span>Category: Prayer & Worship</span>
                                    <span>Replies: 8</span>
                                    <span>Views: 156</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Add modal styles
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
            `;
            
            modal.querySelector('.modal-content').style.cssText = `
                background: linear-gradient(135deg, var(--dark-green), var(--medium-green));
                border-radius: 15px;
                padding: 2rem;
                max-width: 700px;
                width: 90%;
                border: 2px solid var(--gold);
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                max-height: 80vh;
                overflow-y: auto;
            `;
        }

        // Update online users
        function updateOnlineUsers() {
            // Simulate updating online users
            const onlineCount = Math.floor(Math.random() * 50) + 100;
            document.getElementById('online-users-count').textContent = onlineCount;
        }

        // Load recent topics
        function loadRecentTopics() {
            // This would load from an API in a real app
            console.log('Loading recent topics...');
        }

        // User Authentication System

        // Check if user is logged in
        function checkAuthStatus() {
            const userData = localStorage.getItem('communityUser');
            if (userData) {
                currentUser = JSON.parse(userData);
                showUserInfo();
            } else {
                showAuthButtons();
            }
        }

        // Show user info when logged in
        function showUserInfo() {
            document.getElementById('auth-buttons').style.display = 'none';
            document.getElementById('user-info').style.display = 'flex';
            document.getElementById('user-name').textContent = currentUser.username;
            document.getElementById('user-role').textContent = currentUser.role || 'Member';
        }

        // Show auth buttons when not logged in
        function showAuthButtons() {
            document.getElementById('auth-buttons').style.display = 'flex';
            document.getElementById('user-info').style.display = 'none';
        }

        // Show login modal
        function showLoginModal() {
            const modal = document.createElement('div');
            modal.className = 'auth-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h2><i class="fas fa-sign-in-alt"></i> Sign In</h2>
                        <button class="close-btn" onclick="this.closest('.auth-modal').remove()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="loginForm" onsubmit="handleLogin(event)">
                            <div class="form-group">
                                <label for="loginEmail">Email Address</label>
                                <input type="email" id="loginEmail" required placeholder="Enter your email">
                            </div>
                            <div class="form-group">
                                <label for="loginPassword">Password</label>
                                <input type="password" id="loginPassword" required placeholder="Enter your password">
                            </div>
                            <div class="form-options">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="rememberMe">
                                    <span class="checkmark"></span>
                                    Remember me
                                </label>
                                <a href="#" class="forgot-password" onclick="alert('Password reset feature coming soon!')">Forgot password?</a>
                            </div>
                            <button type="submit" class="submit-btn">
                                <i class="fas fa-sign-in-alt"></i> Sign In
                            </button>
                        </form>
                        <div class="modal-footer">
                            <p>Don't have an account? <a href="#" onclick="this.closest('.auth-modal').remove(); showSignupModal()">Sign up here</a></p>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Add modal styles
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
            `;
            
            modal.querySelector('.modal-content').style.cssText = `
                background: linear-gradient(135deg, var(--dark-green), var(--medium-green));
                border-radius: 15px;
                padding: 2rem;
                max-width: 500px;
                width: 90%;
                border: 2px solid var(--gold);
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            `;
        }

        // Show signup modal
        function showSignupModal() {
            const modal = document.createElement('div');
            modal.className = 'auth-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h2><i class="fas fa-user-plus"></i> Sign Up</h2>
                        <button class="close-btn" onclick="this.closest('.auth-modal').remove()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="signupForm" onsubmit="handleSignup(event)">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="signupFirstName">First Name</label>
                                    <input type="text" id="signupFirstName" required placeholder="First name">
                                </div>
                                <div class="form-group">
                                    <label for="signupLastName">Last Name</label>
                                    <input type="text" id="signupLastName" required placeholder="Last name">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="signupEmail">Email Address</label>
                                <input type="email" id="signupEmail" required placeholder="Enter your email">
                            </div>
                            <div class="form-group">
                                <label for="signupUsername">Username</label>
                                <input type="text" id="signupUsername" required placeholder="Choose a username">
                            </div>
                            <div class="form-group">
                                <label for="signupPassword">Password</label>
                                <input type="password" id="signupPassword" required placeholder="Create a password">
                            </div>
                            <div class="form-group">
                                <label for="signupConfirmPassword">Confirm Password</label>
                                <input type="password" id="signupConfirmPassword" required placeholder="Confirm your password">
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="agreeTerms" required>
                                    <span class="checkmark"></span>
                                    I agree to the <a href="#" onclick="alert('Terms of Service')">Terms of Service</a> and <a href="#" onclick="alert('Privacy Policy')">Privacy Policy</a>
                                </label>
                            </div>
                            <button type="submit" class="submit-btn">
                                <i class="fas fa-user-plus"></i> Create Account
                            </button>
                        </form>
                        <div class="modal-footer">
                            <p>Already have an account? <a href="#" onclick="this.closest('.auth-modal').remove(); showLoginModal()">Sign in here</a></p>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Add modal styles
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
            `;
            
            modal.querySelector('.modal-content').style.cssText = `
                background: linear-gradient(135deg, var(--dark-green), var(--medium-green));
                border-radius: 15px;
                padding: 2rem;
                max-width: 500px;
                width: 90%;
                border: 2px solid var(--gold);
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                max-height: 80vh;
                overflow-y: auto;
            `;
        }

        // Handle login
        function handleLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (email && password) {
                currentUser = {
                    id: Date.now(),
                    email: email,
                    username: email.split('@')[0],
                    role: 'Member',
                    joinDate: new Date().toISOString()
                };
                
                localStorage.setItem('communityUser', JSON.stringify(currentUser));
                showUserInfo();
                document.querySelector('.auth-modal').remove();
                showNotification('Welcome back! You are now signed in.', 'success');
                document.getElementById('loginForm').reset();
            } else {
                showNotification('Please fill in all fields.', 'error');
            }
        }

        // Handle signup
        function handleSignup(event) {
            event.preventDefault();
            
            const firstName = document.getElementById('signupFirstName').value;
            const lastName = document.getElementById('signupLastName').value;
            const email = document.getElementById('signupEmail').value;
            const username = document.getElementById('signupUsername').value;
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('signupConfirmPassword').value;
            
            if (!firstName || !lastName || !email || !username || !password || !confirmPassword) {
                showNotification('Please fill in all fields.', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showNotification('Passwords do not match.', 'error');
                return;
            }
            
            if (password.length < 6) {
                showNotification('Password must be at least 6 characters long.', 'error');
                return;
            }
            
            currentUser = {
                id: Date.now(),
                firstName: firstName,
                lastName: lastName,
                email: email,
                username: username,
                role: 'Member',
                joinDate: new Date().toISOString()
            };
            
            localStorage.setItem('communityUser', JSON.stringify(currentUser));
            showUserInfo();
            document.querySelector('.auth-modal').remove();
            showNotification('Account created successfully! Welcome to the community!', 'success');
            document.getElementById('signupForm').reset();
        }

        // Logout function
        function logout() {
            currentUser = null;
            localStorage.removeItem('communityUser');
            showAuthButtons();
            showNotification('You have been signed out.', 'info');
        }

        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? 'var(--light-green)' : type === 'error' ? '#ef4444' : type === 'warning' ? '#f59e0b' : 'var(--gold)'};
                color: ${type === 'success' || type === 'warning' ? 'var(--dark-green)' : 'white'};
                padding: 1rem 1.5rem;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
                z-index: 10000;
                font-weight: 500;
                max-width: 300px;
                transform: translateX(100%);
                transition: transform 0.3s ease;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => notification.style.transform = 'translateX(0)', 100);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Search functionality
        document.getElementById('board-search').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchBoard();
            }
        });

        // Update online users every 30 seconds
        setInterval(updateOnlineUsers, 30000);
        
        // Initialize authentication on page load
        document.addEventListener('DOMContentLoaded', function() {
            checkAuthStatus();
        });
    </script>
</body>
</html>
