<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Topic Discussion - Islamic Learning Companion</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        .topic-page {
            min-height: 100vh;
            background: linear-gradient(135deg, var(--dark-green), var(--darker-green));
        }
        
        .topic-header {
            background: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 2rem 0;
        }
        
        .topic-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .topic-nav {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            color: var(--text-secondary);
        }
        
        .topic-nav a {
            color: var(--light-green);
            text-decoration: none;
        }
        
        .topic-nav a:hover {
            color: var(--gold);
        }
        
        .topic-title {
            color: var(--white);
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            line-height: 1.3;
        }
        
        .topic-meta {
            display: flex;
            align-items: center;
            gap: 2rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }
        
        .topic-author {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        
        .author-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--gold), var(--gold-light));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--dark-green);
            font-weight: bold;
        }
        
        .topic-stats {
            display: flex;
            gap: 2rem;
            margin-left: auto;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .topic-content {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .topic-text {
            color: var(--white);
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 2rem;
        }
        
        .topic-actions {
            display: flex;
            gap: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .action-btn {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--white);
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .action-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--gold);
            color: var(--gold);
        }
        
        .action-btn.liked {
            background: rgba(212, 175, 55, 0.2);
            border-color: var(--gold);
            color: var(--gold);
        }
        
        .replies-section {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .replies-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .replies-title {
            color: var(--gold);
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .reply-item {
            display: flex;
            gap: 1rem;
            padding: 1.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .reply-item:last-child {
            border-bottom: none;
        }
        
        .reply-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--light-green), var(--gold));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--dark-green);
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .reply-content {
            flex: 1;
        }
        
        .reply-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 0.8rem;
        }
        
        .reply-author {
            color: var(--white);
            font-weight: 600;
        }
        
        .reply-time {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .reply-text {
            color: var(--white);
            line-height: 1.6;
            margin-bottom: 1rem;
        }
        
        .reply-actions {
            display: flex;
            gap: 1rem;
        }
        
        .reply-action {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.3rem;
            font-size: 0.9rem;
        }
        
        .reply-action:hover {
            color: var(--gold);
        }
        
        .reply-form {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 2rem;
            margin-top: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            color: var(--white);
            margin-bottom: 0.8rem;
            font-weight: 500;
        }
        
        .form-group textarea {
            width: 100%;
            min-height: 120px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 1rem;
            color: var(--white);
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            outline: none;
        }
        
        .form-group textarea::placeholder {
            color: var(--text-secondary);
        }
        
        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }
        
        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn-primary {
            background: var(--gold);
            color: var(--dark-green);
        }
        
        .btn-primary:hover {
            background: var(--gold-light);
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: transparent;
            color: var(--white);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .arabic-text {
            font-family: 'Amiri', serif;
            direction: rtl;
            text-align: right;
            font-size: 1.2rem;
            color: var(--gold-light);
            margin: 1rem 0;
            padding: 1rem;
            background: rgba(212, 175, 55, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }
        
        .hadith-reference {
            color: var(--light-green);
            font-style: italic;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }
        
        @media (max-width: 768px) {
            .topic-meta {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .topic-stats {
                margin-left: 0;
            }
            
            .topic-title {
                font-size: 2rem;
            }
            
            .reply-item {
                flex-direction: column;
            }
            
            .reply-avatar {
                align-self: flex-start;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-mosque"></i>
                <span>Islamic Learning Companion</span>
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="subjects.html" class="nav-link">Subjects</a>
                <a href="what-is-islam.html" class="nav-link">About Islam</a>
                <a href="community-board.html" class="nav-link active">Community</a>
                <button class="nav-btn" onclick="window.location.href='subjects.html'">Get Started</button>
            </div>
        </div>
    </nav>

    <!-- Topic Page -->
    <div class="topic-page">
        <!-- Topic Header -->
        <div class="topic-header">
            <div class="topic-container">
                <div class="topic-nav">
                    <a href="community-board.html"><i class="fas fa-arrow-left"></i> Back to Community</a>
                    <span>/</span>
                    <span>Quran & Tafseer</span>
                </div>
                
                <h1 class="topic-title">Understanding Surah Al-Fatiha in Depth</h1>
                
                <div class="topic-meta">
                    <div class="topic-author">
                        <div class="author-avatar">AM</div>
                        <div>
                            <div style="color: var(--white); font-weight: 600;">Ahmad Muhammad</div>
                            <div style="font-size: 0.9rem;">2 hours ago</div>
                        </div>
                    </div>
                    <div class="topic-stats">
                        <div class="stat-item">
                            <i class="fas fa-comments"></i>
                            <span>24 replies</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-eye"></i>
                            <span>45 views</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-heart"></i>
                            <span>12 likes</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Topic Content -->
        <div class="topic-container">
            <div class="topic-content">
                <div class="topic-text">
                    <p>Assalamu Alaikum everyone! I wanted to start a discussion about Surah Al-Fatiha, which is the most important chapter in the Quran. Let me share some insights I've learned from studying this beautiful surah.</p>
                    
                    <p>Surah Al-Fatiha is known as "The Opening" and is recited in every unit of every prayer. It's essential for every Muslim to understand its deep meanings and spiritual significance.</p>
                    
                    <div class="arabic-text">
                        بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ
                        الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ
                        الرَّحْمَٰنِ الرَّحِيمِ
                        مَالِكِ يَوْمِ الدِّينِ
                        إِيَّاكَ نَعْبُدُ وَإِيَّاكَ نَسْتَعِينُ
                        اهْدِنَا الصِّرَاطَ الْمُسْتَقِيمَ
                        صِرَاطَ الَّذِينَ أَنْعَمْتَ عَلَيْهِمْ غَيْرِ الْمَغْضُوبِ عَلَيْهِمْ وَلَا الضَّالِّينَ
                    </div>
                    
                    <p><strong>Translation:</strong> "In the name of Allah, the Entirely Merciful, the Especially Merciful. All praise is due to Allah, Lord of the worlds. The Entirely Merciful, the Especially Merciful. Sovereign of the Day of Recompense. It is You we worship and You we ask for help. Guide us to the straight path. The path of those upon whom You have bestowed favor, not of those who have evoked [Your] anger or of those who are astray."</p>
                    
                    <p>I'd love to hear your thoughts on:</p>
                    <ul>
                        <li>What does "the straight path" mean to you personally?</li>
                        <li>How do you connect with the different attributes of Allah mentioned in this surah?</li>
                        <li>What are some practical ways to implement the teachings of Al-Fatiha in daily life?</li>
                    </ul>
                    
                    <p>Please share your insights, questions, or any resources you've found helpful in understanding this surah better. May Allah bless our discussion and help us all grow in our understanding of His beautiful words.</p>
                </div>
                
                <div class="topic-actions">
                    <button class="action-btn" onclick="likeTopic()">
                        <i class="fas fa-heart"></i>
                        <span>Like (12)</span>
                    </button>
                    <button class="action-btn" onclick="shareTopic()">
                        <i class="fas fa-share"></i>
                        <span>Share</span>
                    </button>
                    <button class="action-btn" onclick="bookmarkTopic()">
                        <i class="fas fa-bookmark"></i>
                        <span>Bookmark</span>
                    </button>
                    <button class="action-btn" onclick="reportTopic()">
                        <i class="fas fa-flag"></i>
                        <span>Report</span>
                    </button>
                </div>
            </div>

            <!-- Replies Section -->
            <div class="replies-section">
                <div class="replies-header">
                    <h2 class="replies-title">Replies (24)</h2>
                    <button class="btn btn-secondary" onclick="sortReplies()">
                        <i class="fas fa-sort"></i> Sort by Latest
                    </button>
                </div>

                <!-- Reply 1 -->
                <div class="reply-item">
                    <div class="reply-avatar">FS</div>
                    <div class="reply-content">
                        <div class="reply-header">
                            <span class="reply-author">Fatima Saleem</span>
                            <span class="reply-time">1 hour ago</span>
                        </div>
                        <div class="reply-text">
                            <p>JazakAllah khair for starting this discussion, Ahmad! The straight path to me means following the Quran and Sunnah in all aspects of life. I particularly love how this surah begins with praising Allah's mercy - it reminds us that Allah is always ready to forgive and guide us.</p>
                            
                            <p>One practical way I try to implement Al-Fatiha is by starting each day with the intention to seek Allah's guidance in all my decisions. It really helps me stay focused on what's truly important.</p>
                        </div>
                        <div class="reply-actions">
                            <button class="reply-action" onclick="likeReply(1)">
                                <i class="fas fa-heart"></i> Like (5)
                            </button>
                            <button class="reply-action" onclick="replyToReply(1)">
                                <i class="fas fa-reply"></i> Reply
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Reply 2 -->
                <div class="reply-item">
                    <div class="reply-avatar">IK</div>
                    <div class="reply-content">
                        <div class="reply-header">
                            <span class="reply-author">Ibrahim Khalil</span>
                            <span class="reply-time">45 minutes ago</span>
                        </div>
                        <div class="reply-text">
                            <p>Excellent question about the straight path! I recently read a beautiful tafseer that explained it as the path of the prophets, the truthful, the martyrs, and the righteous. This really helped me understand that we're not alone in this journey.</p>
                            
                            <div class="arabic-text">
                                صِرَاطَ الَّذِينَ أَنْعَمْتَ عَلَيْهِمْ
                            </div>
                            
                            <p>The phrase "those upon whom You have bestowed favor" refers to those who have received Allah's blessings and guidance throughout history. It's comforting to know we're following in the footsteps of the righteous.</p>
                        </div>
                        <div class="reply-actions">
                            <button class="reply-action" onclick="likeReply(2)">
                                <i class="fas fa-heart"></i> Like (8)
                            </button>
                            <button class="reply-action" onclick="replyToReply(2)">
                                <i class="fas fa-reply"></i> Reply
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Reply 3 -->
                <div class="reply-item">
                    <div class="reply-avatar">AY</div>
                    <div class="reply-content">
                        <div class="reply-header">
                            <span class="reply-author">Aisha Yusuf</span>
                            <span class="reply-time">30 minutes ago</span>
                        </div>
                        <div class="reply-text">
                            <p>MashaAllah, beautiful insights everyone! I wanted to share something that really touched my heart. The repetition of "Ar-Rahman, Ar-Raheem" in the first three verses emphasizes Allah's mercy so much. It's like Allah is telling us that His mercy encompasses everything.</p>
                            
                            <p>For practical implementation, I try to recite Al-Fatiha with full concentration during salah, really thinking about each word and its meaning. It's amazing how this changes the entire prayer experience.</p>
                        </div>
                        <div class="reply-actions">
                            <button class="reply-action" onclick="likeReply(3)">
                                <i class="fas fa-heart"></i> Like (6)
                            </button>
                            <button class="reply-action" onclick="replyToReply(3)">
                                <i class="fas fa-reply"></i> Reply
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Reply Form -->
                <div class="reply-form">
                    <h3 style="color: var(--gold); margin-bottom: 1rem;">Add Your Reply</h3>
                    <form onsubmit="submitReply(event)">
                        <div class="form-group">
                            <label for="reply-text">Your Reply</label>
                            <textarea id="reply-text" placeholder="Share your thoughts on this topic..." required></textarea>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="cancelReply()">Cancel</button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-paper-plane"></i> Post Reply
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="js/language-config.js"></script>
    <script src="js/translation-manager.js"></script>
    <script src="js/auto-moderation.js"></script>
    <script>
        // Topic Page Functionality
        let replyCount = 24;
        let likeCount = 12;

        // Initialize topic page
        document.addEventListener('DOMContentLoaded', function() {
            loadTopicData();
        });

        // Load topic data
        function loadTopicData() {
            // Get topic ID from URL
            const urlParams = new URLSearchParams(window.location.search);
            const topicId = urlParams.get('id') || 'topic-1';
            
            // In a real app, this would load topic data from API
            console.log('Loading topic:', topicId);
        }

        // Like topic
        function likeTopic() {
            const btn = event.currentTarget;
            const isLiked = btn.classList.contains('liked');
            
            if (isLiked) {
                btn.classList.remove('liked');
                likeCount--;
                btn.innerHTML = `<i class="fas fa-heart"></i> <span>Like (${likeCount})</span>`;
            } else {
                btn.classList.add('liked');
                likeCount++;
                btn.innerHTML = `<i class="fas fa-heart"></i> <span>Like (${likeCount})</span>`;
            }
        }

        // Share topic
        function shareTopic() {
            if (navigator.share) {
                navigator.share({
                    title: 'Understanding Surah Al-Fatiha in Depth',
                    text: 'Check out this discussion about Surah Al-Fatiha',
                    url: window.location.href
                });
            } else {
                // Fallback for browsers that don't support Web Share API
                navigator.clipboard.writeText(window.location.href);
                alert('Link copied to clipboard!');
            }
        }

        // Bookmark topic
        function bookmarkTopic() {
            // In a real app, this would save to user's bookmarks
            alert('Topic bookmarked!');
        }

        // Report topic
        function reportTopic() {
            const reason = prompt('Please specify the reason for reporting this topic:');
            if (reason) {
                alert('Thank you for your report. We will review it shortly.');
            }
        }

        // Like reply
        function likeReply(replyId) {
            const btn = event.currentTarget;
            const currentLikes = parseInt(btn.textContent.match(/\d+/)[0]);
            const newLikes = currentLikes + 1;
            
            btn.innerHTML = `<i class="fas fa-heart"></i> Like (${newLikes})`;
            btn.style.color = 'var(--gold)';
        }

        // Reply to reply
        function replyToReply(replyId) {
            const replyText = document.getElementById('reply-text');
            replyText.focus();
            replyText.value = `@reply-${replyId} `;
        }

        // Submit reply
        function submitReply(event) {
            event.preventDefault();
            
            const replyText = document.getElementById('reply-text').value;
            if (!replyText.trim()) return;
            
            // In a real app, this would submit to the server
            console.log('Submitting reply:', replyText);
            
            // Add reply to the page
            addReplyToPage(replyText);
            
            // Clear form
            document.getElementById('reply-text').value = '';
            
            // Show success message
            alert('Reply posted successfully!');
        }

        // Add reply to page
        function addReplyToPage(text) {
            const repliesSection = document.querySelector('.replies-section');
            const replyForm = document.querySelector('.reply-form');
            
            const newReply = document.createElement('div');
            newReply.className = 'reply-item';
            newReply.innerHTML = `
                <div class="reply-avatar">GU</div>
                <div class="reply-content">
                    <div class="reply-header">
                        <span class="reply-author">You</span>
                        <span class="reply-time">Just now</span>
                    </div>
                    <div class="reply-text">
                        <p>${text}</p>
                    </div>
                    <div class="reply-actions">
                        <button class="reply-action" onclick="likeReply(${Date.now()})">
                            <i class="fas fa-heart"></i> Like (0)
                        </button>
                        <button class="reply-action" onclick="replyToReply(${Date.now()})">
                            <i class="fas fa-reply"></i> Reply
                        </button>
                    </div>
                </div>
            `;
            
            replyForm.parentNode.insertBefore(newReply, replyForm);
            replyCount++;
            
            // Update reply count
            document.querySelector('.replies-title').textContent = `Replies (${replyCount})`;
        }

        // Cancel reply
        function cancelReply() {
            document.getElementById('reply-text').value = '';
        }

        // Sort replies
        function sortReplies() {
            // In a real app, this would sort replies by different criteria
            alert('Replies sorted by latest!');
        }
    </script>
</body>
</html>
