<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Quran Test - For the Ummah</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, var(--dark-green), var(--medium-green));
            color: var(--light-green);
            min-height: 100vh;
            padding: 2rem;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 2rem;
            border: 2px solid var(--gold);
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .test-header h1 {
            color: var(--gold);
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .ummah-dedication {
            background: linear-gradient(135deg, var(--gold), var(--gold-light));
            color: var(--dark-green);
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 2rem;
            font-weight: bold;
        }
        
        .test-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .result-card {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 1.5rem;
            border-left: 4px solid var(--gold);
        }
        
        .result-card h3 {
            color: var(--gold);
            margin-bottom: 1rem;
        }
        
        .success { border-left-color: #10b981; }
        .warning { border-left-color: #f59e0b; }
        .error { border-left-color: #ef4444; }
        
        .surah-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .surah-item {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .surah-item:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }
        
        .surah-item.complete {
            border-color: var(--gold);
        }
        
        .surah-item h4 {
            color: var(--gold);
            margin-bottom: 0.5rem;
        }
        
        .surah-item .arabic {
            font-family: 'Amiri', serif;
            font-size: 1.2rem;
            color: var(--light-green);
            margin-bottom: 0.5rem;
        }
        
        .test-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin: 2rem 0;
        }
        
        .btn {
            background: var(--gold);
            color: var(--dark-green);
            border: none;
            border-radius: 25px;
            padding: 1rem 2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn:hover {
            background: var(--gold-light);
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: var(--light-green);
            color: var(--dark-green);
        }
        
        .btn-secondary:hover {
            background: var(--highlight-green);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1><i class="fas fa-book-quran"></i> Complete Holy Quran Test</h1>
            <div class="ummah-dedication">
                <i class="fas fa-heart"></i> Testing the Complete Quran Application for the Benefit of the Ummah
            </div>
        </div>

        <div class="test-buttons">
            <button class="btn" onclick="runCompleteTest()">
                <i class="fas fa-play"></i> Run Complete Test
            </button>
            <button class="btn btn-secondary" onclick="testSpecificSurahs()">
                <i class="fas fa-search"></i> Test Specific Surahs
            </button>
            <a href="complete-quran-reader.html" class="btn">
                <i class="fas fa-book"></i> Open Complete Quran Reader
            </a>
            <a href="index.html" class="btn btn-secondary">
                <i class="fas fa-home"></i> Back to Home
            </a>
        </div>

        <div id="testResults" class="test-results">
            <!-- Test results will appear here -->
        </div>

        <div id="surahList" class="surah-list">
            <!-- Surah list will appear here -->
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/complete-quran-all-surahs.js"></script>
    <script src="js/quran-loader.js"></script>
    <script src="js/complete-quran-full.js"></script>
    <script src="complete-quran-data.js"></script>
    
    <script>
        let completeSurahs = {};
        let allSurahs = {};
        
        document.addEventListener('DOMContentLoaded', function() {
            loadQuranData();
            displaySurahList();
        });

        function loadQuranData() {
            // Load complete surahs
            if (window.completeQuranFull) {
                completeSurahs = window.completeQuranFull;
            }
            
            // Load all surahs with fallback data
            if (window.getSurahData) {
                allSurahs = {};
                for (let i = 1; i <= 114; i++) {
                    allSurahs[i] = window.getSurahData(i);
                }
            }
            
            console.log('Complete surahs loaded:', Object.keys(completeSurahs).length);
            console.log('All surahs loaded:', Object.keys(allSurahs).length);
        }

        function runCompleteTest() {
            const resultsContainer = document.getElementById('testResults');
            resultsContainer.innerHTML = '<div class="result-card"><h3><i class="fas fa-spinner fa-spin"></i> Running Tests...</h3></div>';
            
            setTimeout(() => {
                const results = performCompleteTest();
                displayTestResults(results);
            }, 1000);
        }

        function performCompleteTest() {
            const results = {
                totalSurahs: 114,
                completeSurahs: Object.keys(completeSurahs).length,
                allSurahsAvailable: Object.keys(allSurahs).length,
                missingSurahs: [],
                completeList: Object.keys(completeSurahs).map(num => parseInt(num)).sort((a, b) => a - b),
                errors: []
            };
            
            // Check for missing surahs
            for (let i = 1; i <= 114; i++) {
                if (!allSurahs[i]) {
                    results.missingSurahs.push(i);
                    results.errors.push(`Surah ${i} is missing from all surahs data`);
                }
            }
            
            // Check data integrity
            Object.keys(completeSurahs).forEach(num => {
                const surah = completeSurahs[num];
                if (!surah.verses_data || surah.verses_data.length === 0) {
                    results.errors.push(`Surah ${num} (${surah.name}) has no verse data`);
                } else {
                    // Check for placeholder data
                    const hasPlaceholder = surah.verses_data.some(verse => 
                        verse.arabic.includes('[Arabic text for verse')
                    );
                    if (hasPlaceholder) {
                        results.errors.push(`Surah ${num} (${surah.name}) contains placeholder data`);
                    }
                }
            });
            
            return results;
        }

        function displayTestResults(results) {
            const container = document.getElementById('testResults');
            
            container.innerHTML = `
                <div class="result-card success">
                    <h3><i class="fas fa-check-circle"></i> Complete Surahs</h3>
                    <p><strong>${results.completeSurahs}</strong> surahs with complete Arabic text, transliteration, and translation</p>
                    <p>Surahs: ${results.completeList.join(', ')}</p>
                </div>
                
                <div class="result-card ${results.allSurahsAvailable === 114 ? 'success' : 'warning'}">
                    <h3><i class="fas fa-book"></i> All Surahs Available</h3>
                    <p><strong>${results.allSurahsAvailable}/114</strong> surahs have basic data</p>
                    ${results.missingSurahs.length > 0 ? `<p>Missing: ${results.missingSurahs.join(', ')}</p>` : ''}
                </div>
                
                <div class="result-card ${results.errors.length === 0 ? 'success' : 'error'}">
                    <h3><i class="fas fa-bug"></i> Data Integrity</h3>
                    <p><strong>${results.errors.length}</strong> issues found</p>
                    ${results.errors.length > 0 ? `<ul>${results.errors.map(error => `<li>${error}</li>`).join('')}</ul>` : '<p>All data is clean and ready for the Ummah!</p>'}
                </div>
                
                <div class="result-card">
                    <h3><i class="fas fa-heart"></i> For the Ummah</h3>
                    <p>This Quran application is compiled with love for all Muslims worldwide. May Allah accept this effort and make it beneficial for the entire Ummah.</p>
                    <p><strong>Barakallahu feeki</strong> - May Allah bless you for using this application.</p>
                </div>
            `;
        }

        function testSpecificSurahs() {
            const testSurahs = [1, 112, 113, 114, 97, 103, 108, 109];
            const container = document.getElementById('testResults');
            
            container.innerHTML = '<div class="result-card"><h3><i class="fas fa-search"></i> Testing Specific Surahs...</h3></div>';
            
            setTimeout(() => {
                let testResults = '';
                
                testSurahs.forEach(num => {
                    const surah = completeSurahs[num] || allSurahs[num];
                    if (surah) {
                        const isComplete = completeSurahs[num];
                        const status = isComplete ? '✅ Complete' : '⚠️ Basic';
                        testResults += `
                            <div class="result-card ${isComplete ? 'success' : 'warning'}">
                                <h3>Surah ${num}: ${surah.name}</h3>
                                <p><strong>Arabic:</strong> ${surah.arabic}</p>
                                <p><strong>English:</strong> ${surah.english}</p>
                                <p><strong>Type:</strong> ${surah.type}</p>
                                <p><strong>Verses:</strong> ${surah.verses}</p>
                                <p><strong>Status:</strong> ${status}</p>
                                ${isComplete && surah.verses_data ? `<p><strong>Complete verses:</strong> ${surah.verses_data.length}</p>` : ''}
                            </div>
                        `;
                    }
                });
                
                container.innerHTML = testResults || '<div class="result-card error"><h3>No test surahs found</h3></div>';
            }, 500);
        }

        function displaySurahList() {
            const container = document.getElementById('surahList');
            let html = '';
            
            for (let i = 1; i <= 114; i++) {
                const surah = allSurahs[i];
                const isComplete = completeSurahs[i];
                
                if (surah) {
                    html += `
                        <div class="surah-item ${isComplete ? 'complete' : ''}" onclick="showSurahDetails(${i})">
                            <h4>${i}. ${surah.name}</h4>
                            <div class="arabic">${surah.arabic}</div>
                            <p><strong>${surah.english}</strong></p>
                            <p>Type: ${surah.type} | Verses: ${surah.verses}</p>
                            ${isComplete ? '<p style="color: var(--gold);"><i class="fas fa-star"></i> Complete</p>' : '<p style="color: var(--text-secondary);">Basic data</p>'}
                        </div>
                    `;
                }
            }
            
            container.innerHTML = html;
        }

        function showSurahDetails(surahNumber) {
            const surah = allSurahs[surahNumber];
            const isComplete = completeSurahs[surahNumber];
            
            if (surah) {
                alert(`Surah ${surahNumber}: ${surah.name}\n\nArabic: ${surah.arabic}\nEnglish: ${surah.english}\nType: ${surah.type}\nVerses: ${surah.verses}\n\nStatus: ${isComplete ? 'Complete with full verse data' : 'Basic metadata only'}\n\n${isComplete ? 'Click "Open Complete Quran Reader" to read this surah with full Arabic text, transliteration, and translation.' : 'This surah will be available soon, Insha Allah.'}`);
            }
        }

        // Auto-run test on page load
        setTimeout(() => {
            runCompleteTest();
        }, 2000);
    </script>
</body>
</html>