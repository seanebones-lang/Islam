<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quran Reader - Islamic Learning Companion</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* AI Search Widget Styles */
        .ai-search-widget {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(34, 197, 94, 0.1));
            padding: 3rem 0;
            margin: 2rem 0;
        }
        
        .ai-widget {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 2rem;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(212, 175, 55, 0.3);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .ai-widget-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .ai-widget-header h3 {
            color: var(--gold);
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }
        
        .ai-widget-header p {
            color: rgba(255,255,255,0.8);
            font-size: 1.1rem;
        }
        
        .ai-search-container {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .ai-search-input {
            flex: 1;
            padding: 1rem 1.5rem;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 15px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .ai-search-input::placeholder {
            color: rgba(255,255,255,0.7);
        }
        
        .ai-search-input:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.3);
            background: rgba(255,255,255,0.15);
        }
        
        .ai-search-btn {
            background: var(--gold);
            color: var(--dark-green);
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .ai-search-btn:hover {
            background: var(--gold-light);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
        }
        
        .ai-quick-questions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
            margin-bottom: 1.5rem;
        }
        
        .ai-quick-tag {
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            border: 1px solid rgba(255,255,255,0.3);
        }
        
        .ai-quick-tag:hover {
            background: var(--gold);
            color: var(--dark-green);
            transform: translateY(-2px);
            border-color: var(--gold);
        }
        
        .ai-results {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .ai-loading {
            text-align: center;
            color: var(--gold);
            font-size: 1.1rem;
        }
        
        .ai-error {
            color: #ff6b6b;
            text-align: center;
            padding: 1rem;
            background: rgba(255, 107, 107, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(255, 107, 107, 0.3);
        }
        
        .ai-result h4 {
            color: var(--gold);
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        
        .ai-result p {
            color: rgba(255,255,255,0.9);
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        
        .ai-result ul {
            color: rgba(255,255,255,0.9);
            margin-left: 1.5rem;
        }
        
        .ai-result li {
            margin-bottom: 0.5rem;
        }
        
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
        }
        
        .ai-additional-results {
            margin: 1.5rem 0;
            padding: 1rem;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
        }
        
        .ai-additional-results h5 {
            color: var(--gold);
            margin-bottom: 1rem;
        }
        
        .ai-additional-item {
            margin-bottom: 1rem;
            padding: 0.8rem;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            border-left: 3px solid var(--gold);
        }
        
        .ai-additional-item strong {
            color: var(--gold);
            display: block;
            margin-bottom: 0.5rem;
        }
        
        .ai-additional-item p {
            color: rgba(255,255,255,0.8);
            margin: 0;
            font-size: 0.9rem;
        }
        
        /* Groq Disclaimer Styles */
        .groq-disclaimer {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid #ffc107;
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .disclaimer-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #ffc107;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .disclaimer-text {
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        /* Sources Section Styles */
        .sources-section {
            margin: 1.5rem 0;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border-left: 3px solid var(--gold);
        }
        
        .sources-section strong {
            color: var(--gold);
            display: block;
            margin-bottom: 1rem;
        }
        
        .source-item {
            margin-bottom: 0.8rem;
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }
        
        .source-link {
            color: var(--gold);
            text-decoration: none;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: color 0.3s ease;
        }
        
        .source-link:hover {
            color: var(--gold-light);
        }
        
        .source-description {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.8rem;
            margin-top: 0.3rem;
            margin-left: 1.5rem;
        }
        
        @media (max-width: 768px) {
            .ai-search-container {
                flex-direction: column;
            }
            
            .ai-quick-questions {
                justify-content: flex-start;
            }
            
            .ai-widget {
                padding: 1.5rem;
            }
            
            .ai-widget-header h3 {
                font-size: 1.5rem;
            }
            
            .groq-disclaimer {
                padding: 0.8rem;
            }
            
            .sources-section {
                padding: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-mosque"></i>
                <span>Islamic Learning Companion</span>
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link active">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
                <a href="complete-quran-reader.html" class="nav-link quran-link">
                    <i class="fas fa-book-quran"></i>
                    <span>Quran Reader</span>
                </a>
                <a href="rag-assistant.html" class="nav-link ai-link">
                    <i class="fas fa-mosque"></i>
                    <span>DeenBot</span>
                </a>
            </div>
            <div class="nav-actions">
                <button class="mobile-menu-btn" onclick="toggleMobileMenu()" title="Menu">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div class="mobile-menu" id="mobileMenu">
            <div class="mobile-menu-content">
                <a href="index.html" class="mobile-nav-link active">Home</a>
                <a href="complete-quran-reader.html" class="mobile-nav-link">Quran Reader</a>
                <a href="rag-assistant.html" class="mobile-nav-link">DeenBot</a>
                <div class="mobile-menu-divider"></div>
                <a href="#" class="mobile-nav-link contact-link" onclick="showContactSheet()">Contact Us</a>
                <a href="#" class="mobile-nav-link donation-info" onclick="showDonationBreakdown()">What are donations used for?</a>
                <a href="#" class="mobile-nav-link developer-info" onclick="showDeveloperInfo()">Updates from the Developer</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-container">
            <div class="hero-content">
                <div class="dua-header">
                    <div class="dua-arabic">
                        <p class="arabic-text">رَبِّ زِدْنِي عِلْمًا نَافِعًا وَارْزُقْنِي فَهْمًا صَاحِبًا</p>
                        <p class="arabic-text">وَاجْعَلْ هَذَا العَمَلَ خَالِصًا لِوَجْهِكَ الكَرِيمِ</p>
                        <p class="arabic-text">وَنَفَعَ بِهِ أُمَّةَ مُحَمَّدٍ عَلَيْهِ الصَّلَاةُ وَالسَّلَام</p>
                    </div>
                </div>
                <div class="hero-buttons">
                    <button class="btn-primary square-btn" onclick="window.location.href='complete-quran-reader.html'">
                        <span class="quran-text">Holy Quran</span>
                    </button>
                    <div class="verse-display">
                        <p class="verse-arabic">ٱقْرَأْ بِٱسْمِ رَبِّكَ ٱلَّذِى خَلَقَ</p>
                        <p class="verse-transliteration">Iqra' bismi rabbikal-ladhi khalaq</p>
                        <p class="verse-translation">Read in the name of your Lord who created</p>
                        <p class="verse-reference">Surah Al-Alaq 96:1</p>
                    </div>
                </div>
            </div>
            <div class="hero-image">
            </div>
        </div>
    </section>

    <!-- AI Assistant Search Widget -->
    <section class="ai-search-widget">
        <div class="container">
            <div class="ai-widget">
                <div class="ai-widget-header">
                    <h3><i class="fas fa-mosque"></i> Ask DeenBot</h3>
                    <p>Your Islamic AI companion - Get instant answers about Islam, find verses, hadiths, or navigate the app</p>
                </div>
                <div class="ai-search-container">
                    <input type="text" id="aiSearchInput" placeholder="Ask me anything about Islam..." class="ai-search-input">
                    <button onclick="quickAISearch()" class="ai-search-btn">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                <div class="ai-quick-questions">
                    <span class="ai-quick-tag" onclick="quickAISearch('How do I perform wudu?')">Wudu Guide</span>
                    <span class="ai-quick-tag" onclick="quickAISearch('Show me verses about patience')">Patience</span>
                    <span class="ai-quick-tag" onclick="quickAISearch('Find hadiths about charity')">Charity</span>
                    <span class="ai-quick-tag" onclick="quickAISearch('How do I pray?')">Prayer</span>
                </div>
                <div class="ai-results" id="aiResults" style="display: none;"></div>
            </div>
        </div>
    </section>

    <!-- Additional Content Section -->
    <section class="additional-content">
        <div class="container">
            <div class="content-grid">
                <div class="content-card">
                    <h3>Welcome to Your Islamic Journey</h3>
                    <p>Discover the beauty of Islamic teachings through our comprehensive learning platform. Whether you're a new Muslim or looking to deepen your understanding, we're here to support your spiritual growth.</p>
                </div>
                <div class="content-card">
                    <h3>Reliance on Authentic Sources & Openness to Correction</h3>
                    <p>We strive to draw our content solely from the Qur'an and authentic Sunnah, verified by qualified scholars. However, as humans are prone to error, we sincerely welcome any correction from our respected users. If you spot a mistake, please notify us via the "Contact Us" menu. We will review it and correct it, Insha'Allah. May Allah reward you for your nasihah (sincere advice).</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Building a Better Experience for You</h4>
                    <p>To provide you with the best possible app, we've started a complete rebuild! This ensures maximum functionality and ease of use for our community. Please note that features will return in phases as they are perfected.</p>
                    <p>Your patience is invaluable. For updates on our progress or to learn how you can help, see the "Message from the Developer" in the menu. Thank you for your support—Insha'Allah we will create something amazing together.</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Islamic Learning Companion. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Contact Sheet Modal -->
    <div class="contact-modal" id="contactModal">
        <div class="contact-modal-content">
            <div class="contact-modal-header">
                <h3>Contact Us</h3>
                <button class="contact-close" onclick="closeContactSheet()">&times;</button>
            </div>
            <div class="contact-modal-body">
                <p><strong>We Value Your Nasihah (Sincere Advice)</strong></p>
                <p>As believers are mirrors to one another, we warmly welcome your questions, suggestions, or any errors you may have found. Please reach out and may Allah reward you with good.</p>
                <div class="contact-info">
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <div class="contact-details">
                            <strong>Email</strong>
                            <a href="mailto:nextelevenstudios@gmail.com" class="contact-email">nextelevenstudios@gmail.com</a>
                        </div>
                    </div>
                </div>
                <div class="contact-actions">
                    <button class="btn-primary" onclick="window.location.href='mailto:nextelevenstudios@gmail.com'">
                        <i class="fas fa-envelope"></i> Send Email
                    </button>
                    <button class="btn-secondary" onclick="copyEmail()">
                        <i class="fas fa-copy"></i> Copy Email
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Developer Modal -->
    <div class="developer-modal" id="developerModal">
        <div class="developer-modal-content">
            <div class="developer-modal-header">
                <h3>Updates from the Developer</h3>
                <button class="developer-modal-close" onclick="closeDeveloperModal()">&times;</button>
            </div>
            <div class="developer-modal-body">
                <div class="developer-info">
                    <div class="donation-section">
                        <h4>Support the Vision: <a href="https://square.link/u/txN8sC1d" target="_blank" class="donation-link">Donate Here</a></h4>
                    </div>
                    
                    <!-- Recent Updates Section -->
                    <div class="updates-section">
                        <h4>Recent Updates</h4>
                        <div id="updatesList">
                            <!-- Updates will be dynamically loaded here -->
                        </div>
                    </div>
                    
                    <div class="bismillah">
                        <p class="arabic-text">بسم الله الرحمن الرحيم</p>
                    </div>
                    
                    <div class="greeting">
                        <p><strong>As-Salamu Alaikum Wa Rahmatullahi Wa Barakatuh,</strong></p>
                    </div>
                    
                    <div class="vision-section">
                        <p>I am reaching out to you today with a vision that lies at the intersection of our faith and the future—a vision to make the vast and beautiful knowledge of Islam accessible to every Muslim, for free, in the digital age.</p>
                        
                        <p>We are building <strong>DeenBot</strong>, a comprehensive digital platform designed to be a reliable fortress of authentic Islamic knowledge. This project aims to provide:</p>
                        
                        <ul>
                            <li><strong>A Complete Islamic Library:</strong> Integrating major texts from the Qur'an and the six authentic books of Hadith to trusted texts of Fiqh, Tafsir, and Islamic history—all in one place, verified by qualified scholars.</li>
                            <li><strong>AI-Powered Islamic Guidance:</strong> "DeenBot," an intelligent assistant, will provide scholarly-based answers to your questions, helping to combat misinformation with authentic, well-sourced knowledge.</li>
                            <li><strong>A Modern, Accessible Experience:</strong> A beautifully designed platform that works on any device, making learning seamless and engaging for everyone, everywhere.</li>
                        </ul>
                    </div>
                    
                    <div class="why-matters">
                        <h4>Why This Matters Now</h4>
                        <p>Our communities are struggling. Our youth are searching for answers online but often finding diluted or incorrect information. The deep, scholarly tradition of Islam is being lost in a sea of soundbites. This project is our answer: a dedicated effort to preserve our heritage and make it relevant and accessible for today and tomorrow.</p>
                    </div>
                    
                    <div class="work-progress">
                        <h4>A Work in Progress, By the Permission of Allah</h4>
                        <p>This application is currently in a beta rebuild phase. We are rebuilding from the ground up to ensure maximum functionality, reliability, and ease of use. This means features are being re-released gradually as they are perfected. Your patience and duas during this process are invaluable.</p>
                    </div>
                    
                    <div class="sadaqah-section">
                        <h4>Your Role in This Sadaqah Jariyah</h4>
                        <p>This project is a labor of love and a duty to our Ummah. To ensure it reaches its full potential and remains completely free, without any ads or subscriptions, we need your support.</p>
                        
                        <p><strong>100% of your donations</strong> (after standard payment processing fees) will be directed solely towards:</p>
                        <ul>
                            <li>Hosting the platform securely.</li>
                            <li>Development costs to complete and expand its features.</li>
                            <li>Ensuring it remains a free resource for all.</li>
                        </ul>
                        
                        <p>Your contribution is not just a donation; it is an investment in a <strong>Sadaqah Jariyah</strong>—a continuous charity that, God willing, will benefit millions of Muslims around the world for generations to come, and you will share in its reward.</p>
                    </div>
                    
                    <div class="join-us">
                        <h4>Join Us in Building This Legacy</h4>
                        <p class="hadith">The Prophet Muhammad (ﷺ) said, <em>"The best of people are those who are most beneficial to people."</em></p>
                        <p>Let us be among those who benefit others. Join me in this mission to empower the Ummah with knowledge.</p>
                        
                        <div class="support-section">
                            <p><strong>Support the development of DeenBot:</strong></p>
                            <a href="https://square.link/u/txN8sC1d" target="_blank" class="donation-link">Donate Here</a>
                        </div>
                        
                        <p>Please remember this project in your deepest and most sincere prayers.</p>
                    </div>
                    
                    <div class="signature">
                        <p><strong>Jazakum Allahu Khayran,</strong></p>
                        <p><strong>NextEleven Studios</strong><br>Developer</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Donation Breakdown Modal -->
    <div class="donation-modal" id="donationModal">
        <div class="donation-modal-content">
            <div class="donation-modal-header">
                <h3>Where Your Donation Goes</h3>
                <button class="donation-modal-close" onclick="closeDonationModal()">&times;</button>
            </div>
            <div class="donation-modal-body">
                <div class="donation-breakdown">
                    <div class="transparency-intro">
                        <div class="bismillah">
                            <p class="arabic-text">بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ</p>
                        </div>
                        <p><strong>Your Support is a Sadaqah Jariyah in the Path of Knowledge</strong></p>
                        <p class="quran-verse">"Who is it that would loan Allāh a goodly loan so He may multiply it for him many times over?" (Surah Al-Baqarah: 245)</p>
                        <p>Your contribution is far more than a donation; it is a virtuous loan to Allah (Qardh Hasan) and a direct investment in building a lasting infrastructure for authentic Islamic knowledge—preserving our Deen for the digital age.</p>
                        <p>Here is a precise breakdown of how your contributions are allocated:</p>
                    </div>
                    
                    <div class="cost-category">
                        <h4>1. Server Hosting & Infrastructure (The Digital Foundation)</h4>
                        <div class="cost-item">
                            <div class="cost-label">Current Basic Server:</div>
                            <div class="cost-amount">$48/month</div>
                            <div class="cost-description">This hosts the current beta version of the application.</div>
                        </div>
                        <div class="cost-item">
                            <div class="cost-label">Near-Future Scaling:</div>
                            <div class="cost-amount">$120-$200/month</div>
                            <div class="cost-description">As we add the Qur'an, Hadith libraries, and user accounts, we will immediately need a more powerful VPS (Virtual Private Server).</div>
                        </div>
                        <div class="cost-item">
                            <div class="cost-label">DeenBot AI Server:</div>
                            <div class="cost-amount">$300-$500/month</div>
                            <div class="cost-description">To run the complex AI models that power DeenBot, a dedicated, high-performance server is required.</div>
                        </div>
                    </div>
                    
                    <div class="cost-category">
                        <h4>2. Development Tools & Software (The Builder's Toolkit)</h4>
                        <div class="cost-item">
                            <div class="cost-label">Essential Software & APIs:</div>
                            <div class="cost-amount">$60-$100/day</div>
                            <div class="cost-description">Licenses for essential programming software, code libraries, AI APIs, and security tools are critical for professional development. This investment ensures the platform is built on a secure, stable, and modern foundation.</div>
                        </div>
                    </div>
                    
                    <div class="cost-category">
                        <h4>3. Development Time (A Full-Time Commitment)</h4>
                        <div class="cost-item">
                            <div class="cost-label">Full-Time Development:</div>
                            <div class="cost-amount">14-16 hours/day</div>
                            <div class="cost-description">I have left my job to dedicate myself completely to this project. Your support helps cover the essential living costs that allow me to continue this work full-time without having to abandon the project for other work. This ensures development continues uninterrupted.</div>
                        </div>
                    </div>
                    
                    <div class="cost-category">
                        <h4>4. Future Critical Expenses (Preparing for Growth)</h4>
                        <div class="cost-item">
                            <div class="cost-label">Mobile Apps:</div>
                            <div class="cost-amount">Variable</div>
                            <div class="cost-description">Costs for developer accounts (Apple App Store & Google Play Store) and build tools.</div>
                        </div>
                        <div class="cost-item">
                            <div class="cost-label">Security & Backup:</div>
                            <div class="cost-amount">Variable</div>
                            <div class="cost-description">Advanced security certificates, daily backups, and protection from cyber threats to keep user data and Islamic content safe.</div>
                        </div>
                        <div class="cost-item">
                            <div class="cost-label">Content Licensing:</div>
                            <div class="cost-amount">Variable</div>
                            <div class="cost-description">Fees associated with formally licensing certain authoritative translations and scholarly texts to ensure we distribute them legally and ethically.</div>
                        </div>
                        <div class="cost-item">
                            <div class="cost-label">Quality Assurance:</div>
                            <div class="cost-amount">Variable</div>
                            <div class="cost-description">In the future, funds may be used to bring on a part-time tester to help find bugs faster, ensuring a higher quality product for the Ummah.</div>
                        </div>
                    </div>
                    
                    <div class="transparency-pledge">
                        <h4>Our Pledge: 100% Transparency</h4>
                        <p><strong>100% of your donation</strong>, after Square's standard payment processing fee (2.9% + $0.30 per transaction), is dedicated solely to the above expenses. We are committed to no ads, no subscriptions, and no hidden costs.</p>
                        <p>Your donation, large or small, directly powers this mission. You are not just keeping a server online; you are enabling a developer to focus entirely on building a legacy for the Ummah.</p>
                    </div>
                    
                    <div class="support-section">
                        <h4>Support the Development:</h4>
                        <a href="https://square.link/u/txN8sC1d" target="_blank" class="donation-link">Donate Here</a>
                        <p class="prayer-request">May Allah reward you immensely for your support and trust. Please remember this project in your prayers.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Translation System -->
    <script src="js/language-config.js"></script>
    <script src="js/translation-manager.js"></script>
    
    <!-- RAG System -->
    <script src="js/secure-config.js"></script>
    <script src="js/local-config.js"></script>
    <script src="js/complete-quran-data.js"></script>
    <script src="hadiths.js"></script>
    <script src="js/comprehensive-islamic-knowledge.js"></script>
    <script src="js/extensive-islamic-knowledge.js"></script>
    <script src="js/specialized-islamic-knowledge.js"></script>
    <script src="js/detailed-quranic-hadith-database.js"></script>
    <script src="js/rag-system.js"></script>
    <script src="js/floating-deenbot-widget.js"></script>
    
    <script>
        // Mobile Menu Functions
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('active');
        }

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            const mobileMenu = document.getElementById('mobileMenu');
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            
            if (mobileMenu && mobileMenu.classList.contains('active') && 
                !mobileMenu.contains(event.target) && 
                !mobileMenuBtn.contains(event.target)) {
                mobileMenu.classList.remove('active');
            }
        });

        // Developer Info Function
        function showDeveloperInfo() {
            const developerModal = document.getElementById('developerModal');
            developerModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        // Contact Sheet Functions
        function showContactSheet() {
            const contactModal = document.getElementById('contactModal');
            contactModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeContactSheet() {
            const contactModal = document.getElementById('contactModal');
            contactModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function copyEmail() {
            navigator.clipboard.writeText('nextelevenstudios@gmail.com').then(function() {
                alert('Email address copied to clipboard!');
            }, function(err) {
                console.error('Could not copy text: ', err);
                alert('Could not copy email address. Please copy manually: nextelevenstudios@gmail.com');
            });
        }

        // Developer Modal Functions
        function closeDeveloperModal() {
            const developerModal = document.getElementById('developerModal');
            developerModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Donation Modal Functions
        function showDonationBreakdown() {
            const donationModal = document.getElementById('donationModal');
            donationModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeDonationModal() {
            const donationModal = document.getElementById('donationModal');
            donationModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Updates System
        const updates = [
            {
                date: "September 14, 2025",
                updates: [
                    {
                        title: "Complete Quran Reader Implementation",
                        content: [
                            "✅ Fixed Quran reader to display all 114 surahs with complete verses",
                            "✅ Implemented proper page-by-page navigation system",
                            "✅ Added external API integration for complete Quran data",
                            "✅ Created comprehensive surah verification system",
                            "✅ Fixed pagination to show correct page counts (e.g., Al-Baqarah now shows 29 pages instead of 3)"
                        ],
                        type: "major",
                        hours: 10
                    },
                    {
                        title: "UI/UX Enhancements",
                        content: [
                            "✅ Redesigned 'Read the Quran' button to square format with 'Holy Quran' text",
                            "✅ Added beautiful verse display with Arabic, transliteration, and translation",
                            "✅ Updated mobile menu with green theme and better organization",
                            "✅ Added 'Contact Us' functionality with email integration",
                            "✅ Enhanced landing page with additional content sections"
                        ],
                        type: "enhancement",
                        hours: 6
                    },
                    {
                        title: "Developer Communication System",
                        content: [
                            "✅ Created comprehensive developer message modal",
                            "✅ Added donation integration with Square payment system",
                            "✅ Implemented dynamic updates tracking system",
                            "✅ Added vision statement for DeenBot platform",
                            "✅ Enhanced user engagement with Sadaqah Jariyah concept"
                        ],
                        type: "feature",
                        hours: 3
                    }
                ],
                totalHours: 19
            }
        ];

        function loadUpdates() {
            const updatesList = document.getElementById('updatesList');
            if (!updatesList) return;

            updatesList.innerHTML = '';

            updates.forEach((dateGroup, index) => {
                const datePanel = document.createElement('div');
                datePanel.className = 'date-panel';
                
                const isFirst = index === 0;
                const panelId = `panel-${index}`;
                
                datePanel.innerHTML = `
                    <div class="date-header" onclick="togglePanel('${panelId}')">
                        <div class="date-info">
                            <h5 class="date-title">${dateGroup.date}</h5>
                            <span class="total-hours">${dateGroup.totalHours} hours</span>
                        </div>
                        <div class="date-stats">
                            <span class="update-count">${dateGroup.updates.length} updates</span>
                            <i class="fas fa-chevron-down panel-icon" id="icon-${panelId}"></i>
                        </div>
                    </div>
                    <div class="date-content" id="${panelId}" style="display: ${isFirst ? 'block' : 'none'}">
                        ${dateGroup.updates.map(update => `
                            <div class="update-item ${update.type}">
                                <div class="update-header">
                                    <h6 class="update-title">${update.title}</h6>
                                    <span class="update-hours">${update.hours}h</span>
                                </div>
                                <div class="update-content">
                                    <ul class="update-list">
                                        ${update.content.map(item => `<li>${item}</li>`).join('')}
                                    </ul>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                updatesList.appendChild(datePanel);
            });
        }

        function togglePanel(panelId) {
            const panel = document.getElementById(panelId);
            const icon = document.getElementById(`icon-${panelId}`);
            
            if (panel.style.display === 'none') {
                panel.style.display = 'block';
                icon.classList.remove('fa-chevron-down');
                icon.classList.add('fa-chevron-up');
            } else {
                panel.style.display = 'none';
                icon.classList.remove('fa-chevron-up');
                icon.classList.add('fa-chevron-down');
            }
        }

        // Load updates when modal opens
        function showDeveloperInfo() {
            loadUpdates();
            const developerModal = document.getElementById('developerModal');
            developerModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            const contactModal = document.getElementById('contactModal');
            const developerModal = document.getElementById('developerModal');
            const donationModal = document.getElementById('donationModal');
            if (event.target === contactModal) {
                closeContactSheet();
            }
            if (event.target === developerModal) {
                closeDeveloperModal();
            }
            if (event.target === donationModal) {
                closeDonationModal();
            }
        }

        // AI Search Functions
        async function quickAISearch(question = null) {
            const input = document.getElementById('aiSearchInput');
            const query = question || input.value.trim();
            
            if (!query) return;
            
            const resultsDiv = document.getElementById('aiResults');
            resultsDiv.style.display = 'block';
            resultsDiv.innerHTML = '<div class="ai-loading"><i class="fas fa-spinner fa-spin"></i> Searching...</div>';
            
            try {
                if (window.islamicRAG && window.islamicRAG.isInitialized) {
                    const response = await window.islamicRAG.getIntelligentResponse(query);
                    displayAIResults(response, query);
                } else {
                    resultsDiv.innerHTML = '<div class="ai-error">AI Assistant is still loading. Please try again in a moment.</div>';
                }
            } catch (error) {
                console.error('AI Search Error:', error);
                resultsDiv.innerHTML = '<div class="ai-error">Sorry, I encountered an error. Please try again.</div>';
            }
        }
        
        function displayAIResults(response, query) {
            const resultsDiv = document.getElementById('aiResults');
            
            if (response.type === 'no_results') {
                resultsDiv.innerHTML = `
                    <div class="ai-result">
                        <h4>I couldn't find specific information about that.</h4>
                        <p>Try asking about:</p>
                        <ul>
                            <li>Quranic verses by topic</li>
                            <li>Authentic Hadiths</li>
                            <li>Prayer and worship</li>
                            <li>Islamic practices</li>
                        </ul>
                    </div>
                `;
                return;
            }
            
            let html = `<div class="ai-result">
                <h4>${response.response_text}</h4>`;
            
            // Add Groq disclaimer if Groq was used
            if (response.groq_used && response.disclaimer) {
                html += `<div class="groq-disclaimer">
                    <div class="disclaimer-header">
                        <i class="fas fa-exclamation-triangle"></i>
                        <strong>Important Notice</strong>
                    </div>
                    <div class="disclaimer-text">${response.disclaimer}</div>
                </div>`;
            }
            
            // Add sources if available (from Groq)
            if (response.sources && response.sources.length > 0) {
                html += '<div class="sources-section">';
                html += '<strong><i class="fas fa-link"></i> Recommended Sources:</strong>';
                response.sources.forEach(source => {
                    html += `<div class="source-item">
                        <a href="${source.url}" target="_blank" class="source-link">
                            <i class="fas fa-external-link-alt"></i>
                            ${source.name}
                        </a>
                        <div class="source-description">${source.description}</div>
                    </div>`;
                });
                html += '</div>';
            }
            
            
            if (response.additional_results && response.additional_results.length > 0) {
                html += '<div class="ai-additional-results"><h5>Related Results:</h5>';
                response.additional_results.forEach(result => {
                    html += `<div class="ai-additional-item">
                        <strong>${result.title || result.surah_english || result.source}</strong>
                        <p>${result.description || result.translation || result.english}</p>
                    </div>`;
                });
                html += '</div>';
            }
            
            
            html += '</div>';
            resultsDiv.innerHTML = html;
        }
        
        // Handle Enter key for AI search
        document.addEventListener('DOMContentLoaded', function() {
            const aiSearchInput = document.getElementById('aiSearchInput');
            if (aiSearchInput) {
                aiSearchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        quickAISearch();
                    }
                });
            }
        });

        // Global functions
        window.toggleMobileMenu = toggleMobileMenu;
        window.showDeveloperInfo = showDeveloperInfo;
        window.showContactSheet = showContactSheet;
        window.closeContactSheet = closeContactSheet;
        window.closeDeveloperModal = closeDeveloperModal;
        window.showDonationBreakdown = showDonationBreakdown;
        window.closeDonationModal = closeDonationModal;
        window.togglePanel = togglePanel;
        window.copyEmail = copyEmail;
        window.quickAISearch = quickAISearch;
    </script>
</body>
</html>