<!DOCTYPE html>
<html>
<head>
    <title>Verse Debug Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .verse { border: 1px solid #ccc; margin: 5px; padding: 10px; }
        .arabic { font-size: 24px; direction: rtl; }
        .count { color: red; font-weight: bold; }
    </style>
</head>
<body>
    <h1>Verse Debug Test</h1>
    <div id="results"></div>

    <script src="js/complete-quran-all-surahs.js"></script>
    <script>
        window.addEventListener('load', function() {
            const results = document.getElementById('results');

            // Test Surah 2 (Al-Baqarah)
            const surah2 = window.completeQuranAllSurahs[2];
            if (!surah2) {
                results.innerHTML = '<p style="color:red">❌ Surah 2 not found!</p>';
                return;
            }

            results.innerHTML += `<h2>Surah 2: ${surah2.name}</h2>`;
            results.innerHTML += `<p>Expected verses: ${surah2.verses}</p>`;
            results.innerHTML += `<p>verses_data length: ${surah2.verses_data ? surah2.verses_data.length : 'undefined'}</p>`;

            if (surah2.verses_data) {
                let html = '<h3>Verses:</h3>';
                let verseCount = 0;

                // Show first 10 verses
                for (let i = 0; i < Math.min(10, surah2.verses_data.length); i++) {
                    const verse = surah2.verses_data[i];
                    if (verse && verse.arabic) {
                        html += `
                            <div class="verse">
                                <div class="count">Verse ${i + 1}</div>
                                <div class="arabic">${verse.arabic}</div>
                                <div class="transliteration">${verse.transliteration}</div>
                                <div class="translation">${verse.translation}</div>
                            </div>
                        `;
                        verseCount++;
                    } else {
                        html += `<div class="verse" style="color:red">Verse ${i + 1}: MISSING DATA</div>`;
                    }
                }

                html += `<p><strong>Displayed ${verseCount} verses out of ${surah2.verses_data.length} total</strong></p>`;
                results.innerHTML += html;

                // Test if verses_data is complete
                if (surah2.verses_data.length !== surah2.verses) {
                    results.innerHTML += `<p style="color:red">❌ MISMATCH: verses_data has ${surah2.verses_data.length} but metadata says ${surah2.verses} verses</p>`;
                } else {
                    results.innerHTML += `<p style="color:green">✅ Verse count matches metadata</p>`;
                }

                // Check for empty verses
                const emptyVerses = surah2.verses_data.filter(v => !v || !v.arabic || v.arabic.trim() === '');
                if (emptyVerses.length > 0) {
                    results.innerHTML += `<p style="color:red">❌ Found ${emptyVerses.length} empty verses</p>`;
                } else {
                    results.innerHTML += `<p style="color:green">✅ All verses have Arabic text</p>`;
                }
            } else {
                results.innerHTML += '<p style="color:red">❌ verses_data is missing!</p>';
            }
        });
    </script>
</body>
</html>
