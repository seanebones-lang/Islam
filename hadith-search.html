<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hadith Search - Islamic Learning Companion</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .hadith-search-page {
            min-height: 100vh;
            background: linear-gradient(135deg, var(--dark-green), var(--medium-green));
            padding: 2rem 0;
        }
        
        .search-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .search-title {
            font-size: 2.5rem;
            color: var(--gold);
            margin-bottom: 1rem;
            font-weight: 600;
        }
        
        .search-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 2rem;
        }
        
        .search-container {
            margin-bottom: 2rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .search-box {
            position: relative;
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--light-green);
            border-radius: 25px;
            padding: 1rem 1.5rem;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .search-box:focus-within {
            border-color: var(--gold);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }
        
        .search-icon {
            color: var(--light-green);
            margin-right: 1rem;
            font-size: 1.2rem;
        }
        
        .search-input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: var(--white);
            font-size: 1.1rem;
            font-family: 'Inter', sans-serif;
        }
        
        .search-input::placeholder {
            color: var(--text-secondary);
        }
        
        .clear-search-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--text-secondary);
            border-radius: 50%;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 0.5rem;
        }
        
        .clear-search-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            color: var(--white);
        }
        
        .search-results {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 20px;
            margin-top: 2rem;
            max-height: 500px;
            overflow-y: auto;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .search-result-item {
            padding: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .search-result-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .search-result-item:last-child {
            border-bottom: none;
        }
        
        .search-result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .search-result-source {
            font-weight: 600;
            color: var(--gold);
            font-size: 1.1rem;
        }
        
        .search-result-grade {
            background: var(--light-green);
            color: var(--dark-green);
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .search-result-arabic {
            font-family: 'Amiri', serif;
            font-size: 1.4rem;
            color: var(--light-green);
            margin-bottom: 1rem;
            text-align: right;
            direction: rtl;
            line-height: 1.8;
        }
        
        .search-result-translation {
            color: var(--white);
            margin-bottom: 1rem;
            line-height: 1.6;
            font-size: 1rem;
        }
        
        .search-result-narrator {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-style: italic;
        }
        
        .search-highlight {
            background: rgba(212, 175, 55, 0.3);
            padding: 0.1rem 0.2rem;
            border-radius: 3px;
        }
        
        .loading-spinner {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            color: var(--light-green);
        }
        
        .loading-spinner i {
            animation: spin 1s linear infinite;
            margin-right: 1rem;
            font-size: 1.5rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .back-to-home {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.1);
            color: var(--light-green);
            border: 2px solid var(--light-green);
            border-radius: 25px;
            padding: 0.5rem 1rem;
            text-decoration: none;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .back-to-home:hover {
            background: var(--light-green);
            color: var(--dark-green);
        }
        
        .search-stats {
            text-align: center;
            margin-top: 2rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .search-suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
            margin-top: 1rem;
        }
        
        .suggestion-tag {
            background: rgba(255, 255, 255, 0.1);
            color: var(--light-green);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .suggestion-tag:hover {
            background: var(--light-green);
            color: var(--dark-green);
        }
        
        @media (max-width: 768px) {
            .search-title {
                font-size: 2rem;
            }
            
            .search-box {
                padding: 0.8rem 1rem;
            }
            
            .search-input {
                font-size: 1rem;
            }
            
            .search-result-arabic {
                font-size: 1.2rem;
            }
            
            .search-results {
                max-height: 400px;
            }
            
            .back-to-home {
                position: static;
                margin: 1rem;
                text-align: center;
                display: inline-block;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-left">
                <button class="back-btn" onclick="goBack()" title="Go Back">
                    <i class="fas fa-arrow-left"></i>
                </button>
            </div>
            <div class="nav-logo">
                <i class="fas fa-mosque"></i>
                <span>Islamic Learning Companion</span>
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="complete-quran-reader.html" class="nav-link">Quran Reader</a>
                <a href="hadith-search.html" class="nav-link active">Hadith Search</a>
                <a href="daily-companion.html" class="nav-link">Daily Companion</a>
            </div>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()" title="Menu">
                <i class="fas fa-bars"></i>
            </button>
        </div>

        <!-- Mobile Menu -->
        <div class="mobile-menu" id="mobileMenu">
            <div class="mobile-menu-content">
                <div class="mobile-menu-section">
                    <div class="mobile-menu-header" onclick="toggleDropdown('homeDropdown')">
                        <span>Home</span>
                        <i class="fas fa-chevron-down" id="homeChevron"></i>
                    </div>
                    <div class="mobile-dropdown" id="homeDropdown">
                        <a href="index.html" class="mobile-nav-link">Main Page</a>
                        <a href="complete-quran-reader.html" class="mobile-nav-link">Quran Reader</a>
                        <a href="hadith-search.html" class="mobile-nav-link active">Hadith Search</a>
                        <a href="daily-companion.html" class="mobile-nav-link">Daily Companion</a>
                    </div>
                </div>
                <div class="mobile-menu-divider"></div>
                <a href="#" class="mobile-nav-link contact-link" onclick="showContactSheet()">Contact Us</a>
                <a href="#" class="mobile-nav-link donation-info" onclick="showDonationBreakdown()">What are donations used for?</a>
                <a href="#" class="mobile-nav-link developer-info" onclick="showDeveloperInfo()">Updates from the Developer</a>
            </div>
        </div>
    </nav>

    <!-- Hadith Search Section -->
    <section class="hadith-search-page">
        <div class="container">
            <!-- Search Header -->
            <div class="search-header">
                <h1 class="search-title">
                    <i class="fas fa-search"></i>
                    Hadith Search
                </h1>
                <p class="search-subtitle">Search authentic hadiths from all 6 major collections</p>
                
                <!-- Search Suggestions -->
                <div class="search-suggestions">
                    <span class="suggestion-tag" onclick="searchFor('prayer')">Prayer</span>
                    <span class="suggestion-tag" onclick="searchFor('charity')">Charity</span>
                    <span class="suggestion-tag" onclick="searchFor('patience')">Patience</span>
                    <span class="suggestion-tag" onclick="searchFor('family')">Family</span>
                    <span class="suggestion-tag" onclick="searchFor('mercy')">Mercy</span>
                    <span class="suggestion-tag" onclick="searchFor('knowledge')">Knowledge</span>
                </div>
            </div>
            
            <!-- Search Bar -->
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="hadithSearch" placeholder="Search hadiths by topic, keyword, or Arabic text..." class="search-input">
                    <button id="clearHadithSearch" class="clear-search-btn" onclick="clearHadithSearch()" style="display: none;">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="search-results" id="hadithSearchResults" style="display: none;">
                    <!-- Search results will be populated here -->
                </div>
                <div class="search-stats" id="searchStats" style="display: none;">
                    <!-- Search statistics will be shown here -->
                </div>
            </div>
        </div>
    </section>

    <!-- Scripts -->
    <script src="hadiths.js"></script>
    
    <script>
        // Initialize the hadith search page
        document.addEventListener('DOMContentLoaded', function() {
            initializeHadithSearch();
        });
        
        // Search for suggestion tags
        function searchFor(term) {
            const searchInput = document.getElementById('hadithSearch');
            searchInput.value = term;
            performHadithSearch(term);
        }
        
        // Enhanced search results display for the dedicated page
        function displayHadithSearchResults(results, query) {
            const searchResults = document.getElementById('hadithSearchResults');
            const clearBtn = document.getElementById('clearHadithSearch');
            const searchStats = document.getElementById('searchStats');
            
            if (results.length === 0) {
                searchResults.innerHTML = `
                    <div class="search-result-item">
                        <div class="search-result-header">
                            <div class="search-result-source">No hadiths found</div>
                        </div>
                        <div class="search-result-translation">Try searching with different keywords or check your spelling.</div>
                    </div>
                `;
            } else {
                searchResults.innerHTML = results.map(hadith => `
                    <div class="search-result-item" onclick="viewHadithDetails('${hadith.id}')">
                        <div class="search-result-header">
                            <div class="search-result-source">${hadith.source} - Hadith ${hadith.hadith}</div>
                            <div class="search-result-grade">${hadith.grade || 'Sahih'}</div>
                        </div>
                        <div class="search-result-arabic">${highlightText(hadith.arabic, query)}</div>
                        <div class="search-result-translation">${highlightText(hadith.english, query)}</div>
                        <div class="search-result-narrator">
                            ${hadith.narrator ? `Narrated by: ${hadith.narrator}` : ''} 
                            ${hadith.apiSource ? `• Source: ${hadith.apiSource.toUpperCase()}` : ''}
                        </div>
                    </div>
                `).join('');
            }
            
            // Show search statistics
            searchStats.innerHTML = `Found ${results.length} hadith${results.length !== 1 ? 's' : ''} for "${query}"`;
            searchStats.style.display = 'block';
            
            searchResults.style.display = 'block';
            clearBtn.style.display = 'block';
        }
        
        // Override the original display function
        window.displayHadithSearchResults = displayHadithSearchResults;

        // Navigation Functions
        function goBack() {
            if (window.history.length > 1) {
                window.history.back();
            } else {
                window.location.href = 'index.html';
            }
        }

        // Mobile Menu Functions
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('active');
        }
        
        function toggleDropdown(dropdownId) {
            const dropdown = document.getElementById(dropdownId);
            const header = dropdown.previousElementSibling;
            const chevron = header.querySelector('i');
            
            dropdown.classList.toggle('active');
            chevron.classList.toggle('active');
        }

        // Contact and Info Functions
        function showContactSheet() {
            const contactModal = document.getElementById('contactModal');
            if (contactModal) {
                contactModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
        }
        
        function closeContactSheet() {
            const contactModal = document.getElementById('contactModal');
            if (contactModal) {
                contactModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        function showDonationBreakdown() {
            const donationModal = document.getElementById('donationModal');
            if (donationModal) {
                donationModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
        }
        
        function closeDonationModal() {
            const donationModal = document.getElementById('donationModal');
            if (donationModal) {
                donationModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        function showDeveloperInfo() {
            const developerModal = document.getElementById('developerModal');
            if (developerModal) {
                developerModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
        }
        
        function closeDeveloperModal() {
            const developerModal = document.getElementById('developerModal');
            if (developerModal) {
                developerModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }
        
        function copyEmail() {
            const email = 'nextelevenstudios@gmail.com';
            navigator.clipboard.writeText(email).then(function() {
                alert('Email copied to clipboard!');
            }, function(err) {
                console.error('Could not copy text: ', err);
                alert('Could not copy email. Please copy manually: ' + email);
            });
        }

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            const mobileMenu = document.getElementById('mobileMenu');
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            
            if (mobileMenu && mobileMenu.classList.contains('active') && 
                !mobileMenu.contains(event.target) && 
                !mobileMenuBtn.contains(event.target)) {
                mobileMenu.classList.remove('active');
            }
        });
    </script>

    <!-- Contact Sheet Modal -->
    <div class="contact-modal" id="contactModal">
        <div class="contact-modal-content">
            <div class="contact-modal-header">
                <h3>Contact Us</h3>
                <button class="contact-close" onclick="closeContactSheet()">&times;</button>
            </div>
            <div class="contact-modal-body">
                <p>We'd love to hear from you! Get in touch with us:</p>
                <div class="contact-info">
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <div class="contact-details">
                            <strong>Email:</strong>
                            <a href="mailto:nextelevenstudios@gmail.com" class="contact-email">nextelevenstudios@gmail.com</a>
                        </div>
                    </div>
                </div>
                <div class="contact-actions">
                    <button class="btn-primary" onclick="copyEmail()">Copy Email</button>
                    <button class="btn-secondary" onclick="closeContactSheet()">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Developer Modal -->
    <div class="developer-modal" id="developerModal">
        <div class="developer-modal-content">
            <div class="developer-modal-header">
                <h3>Updates from the Developer</h3>
                <button class="developer-modal-close" onclick="closeDeveloperModal()">&times;</button>
            </div>
            <div class="developer-modal-body">
                <div class="developer-info">
                    <h4>Recent Updates</h4>
                    <div class="updates-section">
                        <h4>Latest Features</h4>
                        <div id="updatesList">
                            <p><strong>Version 2.0 - Complete Quran Implementation</strong></p>
                            <ul>
                                <li>Full 114 surahs with Arabic text, translations, and transliterations</li>
                                <li>Advanced search functionality across all surahs</li>
                                <li>Audio playback with verse-by-verse controls</li>
                                <li>Bookmarking and note-taking features</li>
                                <li>Mobile-responsive design for all devices</li>
                            </ul>
                        </div>
                    </div>
                    
                    <h4>About the Development</h4>
                    <p>This Islamic Learning Companion is being developed with the goal of providing authentic, accessible Islamic education to Muslims worldwide. We strive to draw our content solely from the Qur'an and authentic Sunnah, verified by qualified scholars.</p>
                    
                    <h4>Support the Development</h4>
                    <p>Your support helps us continue developing and improving this platform. All donations go directly towards development costs, server maintenance, and content creation.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Donation Modal -->
    <div class="donation-modal" id="donationModal">
        <div class="donation-modal-content">
            <div class="donation-modal-header">
                <h3>What are donations used for?</h3>
                <button class="donation-modal-close" onclick="closeDonationModal()">&times;</button>
            </div>
            <div class="donation-modal-body">
                <div class="donation-info">
                    <h4>How Your Donations Help</h4>
                    <p><strong>100% of your donations</strong> (after standard payment processing fees) will be directed solely towards:</p>
                    <ul>
                        <li><strong>Development costs</strong> to complete and expand features</li>
                        <li><strong>Server maintenance</strong> to ensure reliable access</li>
                        <li><strong>Content creation</strong> and scholarly review</li>
                        <li><strong>Translation services</strong> for multiple languages</li>
                        <li><strong>Audio production</strong> for Quran recitations</li>
                    </ul>
                    
                    <h4>Transparency Promise</h4>
                    <p>We believe in complete transparency. All donation usage will be publicly documented and available for review.</p>
                    
                    <div class="donation-actions">
                        <button class="btn-primary" onclick="closeDonationModal()">Understood</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
